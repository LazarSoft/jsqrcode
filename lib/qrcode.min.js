!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("qrcode",[],t):"object"==typeof exports?exports.qrcode=t():e.qrcode=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return e>=0?e>>t:(e>>t)+(2<<~t)}Object.defineProperty(t,"__esModule",{value:!0}),t.URShift=i;var a=n(7),o=r(a),s=n(12),h=r(s),u={};u.imagedata=null,u.width=0,u.height=0,u.qrCodeSymbol=null,u.debug=!1,u.maxImgSize=1048576,u.sizeOfDataLengthInfo=[[10,9,8,8],[12,11,16,10],[14,13,16,12]],u.callback=null,u.src=null,u.result=null,u.vidSuccess=function(e){u.localstream=e,u.video.src=window.URL.createObjectURL(e),u.gUM=!0,u.canvas_qr2=document.createElement("canvas"),u.canvas_qr2.id="qr-canvas",u.qrcontext2=u.canvas_qr2.getContext("2d"),u.canvas_qr2.width=u.video.videoWidth,u.canvas_qr2.height=u.video.videoHeight,setTimeout(u.captureToCanvas,500)},u.vidError=function(e){u.gUM=!1},u.captureToCanvas=function(){if(u.gUM)try{if(0==u.video.videoWidth)return void setTimeout(u.captureToCanvas,500);u.canvas_qr2.width=u.video.videoWidth,u.canvas_qr2.height=u.video.videoHeight,u.qrcontext2.drawImage(u.video,0,0);try{u.decode()}catch(e){console.log(e),setTimeout(u.captureToCanvas,500)}}catch(e){console.log(e),setTimeout(u.captureToCanvas,500)}},u.destroyWebcam=function(){u.localstream.getTracks()[0].stop()},u.setWebcam=function(e){var t=navigator;u.video=document.getElementById(e);var n=!0;if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)try{navigator.mediaDevices.enumerateDevices().then(function(e){e.forEach(function(e){console.log("deb1"),"videoinput"===e.kind&&e.label.toLowerCase().search("back")>-1&&(n=[{sourceId:e.deviceId}]),console.log(e.kind+": "+e.label+" id = "+e.deviceId)})})}catch(e){console.log(e)}else console.log("no navigator.mediaDevices.enumerateDevices");t.mediaDevices.getUserMedia({video:n,audio:!1}).then(u.vidSuccess).catch(u.vidError)},u.decode=function(e){if(0==arguments.length){if(u.canvas_qr2)var t=u.canvas_qr2,n=u.qrcontext2;else var t=document.getElementById("qr-canvas"),n=t.getContext("2d");return u.width=t.width,u.height=t.height,u.imagedata=n.getImageData(0,0,u.width,u.height),u.result=u.process(n),null!=u.callback&&u.callback(u.result),u.result}var r=new Image;r.crossOrigin="Anonymous",r.onload=function(){var e=document.getElementById("out-canvas");if(null!=e){var t=e.getContext("2d");t.clearRect(0,0,320,240),t.drawImage(r,0,0,320,240)}var n=document.createElement("canvas"),i=n.getContext("2d"),a=r.height,o=r.width;if(r.width*r.height>u.maxImgSize){var s=r.width/r.height;a=Math.sqrt(u.maxImgSize/s),o=s*a}n.width=o,n.height=a,i.drawImage(r,0,0,n.width,n.height),u.width=n.width,u.height=n.height;try{u.imagedata=i.getImageData(0,0,n.width,n.height)}catch(e){return u.result="Cross domain image reading not supported in your browser! Save it to your computer then drag and drop the file!",void(null!=u.callback&&u.callback(u.result))}try{u.result=u.process(i)}catch(e){console.log(e),u.result="error decoding QR Code"}null!=u.callback&&u.callback(u.result)},r.onerror=function(){null!=u.callback&&u.callback("Failed to load the image")},r.src=e},u.isUrl=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)},u.decode_url=function(e){var t="";try{t=escape(e)}catch(n){console.log(n),t=e}var n="";try{n=decodeURIComponent(t)}catch(e){console.log(e),n=t}return n},u.decode_utf8=function(e){return u.isUrl(e)?u.decode_url(e):e},u.process=function(e){var t=(new Date).getTime(),n=u.grayScaleToBitmap(u.grayscale());if(u.debug){for(var r=0;r<u.height;r++)for(var i=0;i<u.width;i++){var a=4*i+r*u.width*4;u.imagedata.data[a]=(n[i+r*u.width],0),u.imagedata.data[a+1]=(n[i+r*u.width],0),u.imagedata.data[a+2]=n[i+r*u.width]?255:0}e.putImageData(u.imagedata,0,0)}var s=new o.default(n),f=s.detect();if(u.debug){for(var r=0;r<f.bits.Height;r++)for(var i=0;i<f.bits.Width;i++){var a=4*i*2+2*r*u.width*4;u.imagedata.data[a]=(f.bits.get_Renamed(i,r),0),u.imagedata.data[a+1]=(f.bits.get_Renamed(i,r),0),u.imagedata.data[a+2]=f.bits.get_Renamed(i,r)?255:0}e.putImageData(u.imagedata,0,0)}for(var l=h.default.decode(f.bits),d=l.DataByte,w="",c=0;c<d.length;c++)for(var v=0;v<d[c].length;v++)w+=String.fromCharCode(d[c][v]);var g=(new Date).getTime(),m=g-t;return console.log(m),u.decode_utf8(w)},u.getPixel=function(e,t){if(u.width<e)throw"point error";if(u.height<t)throw"point error";var n=4*e+t*u.width*4;return(33*u.imagedata.data[n]+34*u.imagedata.data[n+1]+33*u.imagedata.data[n+2])/100},u.binarize=function(e){for(var t=new Array(u.width*u.height),n=0;n<u.height;n++)for(var r=0;r<u.width;r++){var i=u.getPixel(r,n);t[r+n*u.width]=i<=e}return t},u.getMiddleBrightnessPerArea=function(e){for(var t=Math.floor(u.width/4),n=Math.floor(u.height/4),r=new Array(4),i=0;i<4;i++){r[i]=new Array(4);for(var a=0;a<4;a++)r[i][a]=new Array(0,0)}for(var o=0;o<4;o++)for(var s=0;s<4;s++){r[s][o][0]=255;for(var h=0;h<n;h++)for(var f=0;f<t;f++){var l=e[t*s+f+(n*o+h)*u.width];l<r[s][o][0]&&(r[s][o][0]=l),l>r[s][o][1]&&(r[s][o][1]=l)}}for(var d=new Array(4),w=0;w<4;w++)d[w]=new Array(4);for(var o=0;o<4;o++)for(var s=0;s<4;s++)d[s][o]=Math.floor((r[s][o][0]+r[s][o][1])/2);return d},u.grayScaleToBitmap=function(e){for(var t=u.getMiddleBrightnessPerArea(e),n=t.length,r=Math.floor(u.width/n),i=Math.floor(u.height/n),a=new ArrayBuffer(u.width*u.height),o=new Uint8Array(a),s=0;s<n;s++)for(var h=0;h<n;h++)for(var f=0;f<i;f++)for(var l=0;l<r;l++)o[r*h+l+(i*s+f)*u.width]=e[r*h+l+(i*s+f)*u.width]<t[h][s];return o},u.grayscale=function(){for(var e=new ArrayBuffer(u.width*u.height),t=new Uint8Array(e),n=0;n<u.height;n++)for(var r=0;r<u.width;r++){var i=u.getPixel(r,n);t[r+n*u.width]=i}return t},t.default=u},function(e,t,n){"use strict";function r(e){this.expTable=new Array(256),this.logTable=new Array(256);for(var t=1,n=0;n<256;n++)this.expTable[n]=t,(t<<=1)>=256&&(t^=e);for(var n=0;n<255;n++)this.logTable[this.expTable[n]]=n;var r=new Array(1);r[0]=0,this.zero=new a.default(this,new Array(r));var i=new Array(1);i[0]=1,this.one=new a.default(this,new Array(i)),this.__defineGetter__("Zero",function(){return this.zero}),this.__defineGetter__("One",function(){return this.one}),this.buildMonomial=function(e,t){if(e<0)throw"System.ArgumentException";if(0==t)return this.zero;for(var n=new Array(e+1),r=0;r<n.length;r++)n[r]=0;return n[0]=t,new a.default(this,n)},this.exp=function(e){return this.expTable[e]},this.log=function(e){if(0==e)throw"System.ArgumentException";return this.logTable[e]},this.inverse=function(e){if(0==e)throw"System.ArithmeticException";return this.expTable[255-this.logTable[e]]},this.multiply=function(e,t){return 0==e||0==t?0:1==e?t:1==t?e:this.expTable[(this.logTable[e]+this.logTable[t])%255]}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(5),a=function(e){return e&&e.__esModule?e:{default:e}}(i);r.QR_CODE_FIELD=new r(285),r.DATA_MATRIX_FIELD=new r(301),r.addOrSubtract=function(e,t){return e^t},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){this.count=e,this.dataCodewords=t,this.__defineGetter__("Count",function(){return this.count}),this.__defineGetter__("DataCodewords",function(){return this.dataCodewords})}function a(e,t,n){this.ecCodewordsPerBlock=e,this.ecBlocks=n?new Array(t,n):new Array(t),this.__defineGetter__("ECCodewordsPerBlock",function(){return this.ecCodewordsPerBlock}),this.__defineGetter__("TotalECCodewords",function(){return this.ecCodewordsPerBlock*this.NumBlocks}),this.__defineGetter__("NumBlocks",function(){for(var e=0,t=0;t<this.ecBlocks.length;t++)e+=this.ecBlocks[t].length;return e}),this.getECBlocks=function(){return this.ecBlocks}}function o(e,t,n,r,i,a){this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=new Array(n,r,i,a);for(var o=0,s=n.ECCodewordsPerBlock,h=n.getECBlocks(),u=0;u<h.length;u++){var l=h[u];o+=l.Count*(l.DataCodewords+s)}this.totalCodewords=o,this.__defineGetter__("VersionNumber",function(){return this.versionNumber}),this.__defineGetter__("AlignmentPatternCenters",function(){return this.alignmentPatternCenters}),this.__defineGetter__("TotalCodewords",function(){return this.totalCodewords}),this.__defineGetter__("DimensionForVersion",function(){return 17+4*this.versionNumber}),this.buildFunctionPattern=function(){var e=this.DimensionForVersion,t=new f.default(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,r=0;r<n;r++)for(var i=this.alignmentPatternCenters[r]-2,a=0;a<n;a++)0==r&&(0==a||a==n-1)||r==n-1&&0==a||t.setRegion(this.alignmentPatternCenters[a]-2,i,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},this.getECBlocksForLevel=function(e){return this.ecBlocks[e.ordinal()]}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var s=n(3),h=r(s),u=n(4),f=r(u);o.VERSION_DECODE_INFO=new Array(31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017),o.VERSIONS=function(){return new Array(new o(1,new Array,new a(7,new i(1,19)),new a(10,new i(1,16)),new a(13,new i(1,13)),new a(17,new i(1,9))),new o(2,new Array(6,18),new a(10,new i(1,34)),new a(16,new i(1,28)),new a(22,new i(1,22)),new a(28,new i(1,16))),new o(3,new Array(6,22),new a(15,new i(1,55)),new a(26,new i(1,44)),new a(18,new i(2,17)),new a(22,new i(2,13))),new o(4,new Array(6,26),new a(20,new i(1,80)),new a(18,new i(2,32)),new a(26,new i(2,24)),new a(16,new i(4,9))),new o(5,new Array(6,30),new a(26,new i(1,108)),new a(24,new i(2,43)),new a(18,new i(2,15),new i(2,16)),new a(22,new i(2,11),new i(2,12))),new o(6,new Array(6,34),new a(18,new i(2,68)),new a(16,new i(4,27)),new a(24,new i(4,19)),new a(28,new i(4,15))),new o(7,new Array(6,22,38),new a(20,new i(2,78)),new a(18,new i(4,31)),new a(18,new i(2,14),new i(4,15)),new a(26,new i(4,13),new i(1,14))),new o(8,new Array(6,24,42),new a(24,new i(2,97)),new a(22,new i(2,38),new i(2,39)),new a(22,new i(4,18),new i(2,19)),new a(26,new i(4,14),new i(2,15))),new o(9,new Array(6,26,46),new a(30,new i(2,116)),new a(22,new i(3,36),new i(2,37)),new a(20,new i(4,16),new i(4,17)),new a(24,new i(4,12),new i(4,13))),new o(10,new Array(6,28,50),new a(18,new i(2,68),new i(2,69)),new a(26,new i(4,43),new i(1,44)),new a(24,new i(6,19),new i(2,20)),new a(28,new i(6,15),new i(2,16))),new o(11,new Array(6,30,54),new a(20,new i(4,81)),new a(30,new i(1,50),new i(4,51)),new a(28,new i(4,22),new i(4,23)),new a(24,new i(3,12),new i(8,13))),new o(12,new Array(6,32,58),new a(24,new i(2,92),new i(2,93)),new a(22,new i(6,36),new i(2,37)),new a(26,new i(4,20),new i(6,21)),new a(28,new i(7,14),new i(4,15))),new o(13,new Array(6,34,62),new a(26,new i(4,107)),new a(22,new i(8,37),new i(1,38)),new a(24,new i(8,20),new i(4,21)),new a(22,new i(12,11),new i(4,12))),new o(14,new Array(6,26,46,66),new a(30,new i(3,115),new i(1,116)),new a(24,new i(4,40),new i(5,41)),new a(20,new i(11,16),new i(5,17)),new a(24,new i(11,12),new i(5,13))),new o(15,new Array(6,26,48,70),new a(22,new i(5,87),new i(1,88)),new a(24,new i(5,41),new i(5,42)),new a(30,new i(5,24),new i(7,25)),new a(24,new i(11,12),new i(7,13))),new o(16,new Array(6,26,50,74),new a(24,new i(5,98),new i(1,99)),new a(28,new i(7,45),new i(3,46)),new a(24,new i(15,19),new i(2,20)),new a(30,new i(3,15),new i(13,16))),new o(17,new Array(6,30,54,78),new a(28,new i(1,107),new i(5,108)),new a(28,new i(10,46),new i(1,47)),new a(28,new i(1,22),new i(15,23)),new a(28,new i(2,14),new i(17,15))),new o(18,new Array(6,30,56,82),new a(30,new i(5,120),new i(1,121)),new a(26,new i(9,43),new i(4,44)),new a(28,new i(17,22),new i(1,23)),new a(28,new i(2,14),new i(19,15))),new o(19,new Array(6,30,58,86),new a(28,new i(3,113),new i(4,114)),new a(26,new i(3,44),new i(11,45)),new a(26,new i(17,21),new i(4,22)),new a(26,new i(9,13),new i(16,14))),new o(20,new Array(6,34,62,90),new a(28,new i(3,107),new i(5,108)),new a(26,new i(3,41),new i(13,42)),new a(30,new i(15,24),new i(5,25)),new a(28,new i(15,15),new i(10,16))),new o(21,new Array(6,28,50,72,94),new a(28,new i(4,116),new i(4,117)),new a(26,new i(17,42)),new a(28,new i(17,22),new i(6,23)),new a(30,new i(19,16),new i(6,17))),new o(22,new Array(6,26,50,74,98),new a(28,new i(2,111),new i(7,112)),new a(28,new i(17,46)),new a(30,new i(7,24),new i(16,25)),new a(24,new i(34,13))),new o(23,new Array(6,30,54,74,102),new a(30,new i(4,121),new i(5,122)),new a(28,new i(4,47),new i(14,48)),new a(30,new i(11,24),new i(14,25)),new a(30,new i(16,15),new i(14,16))),new o(24,new Array(6,28,54,80,106),new a(30,new i(6,117),new i(4,118)),new a(28,new i(6,45),new i(14,46)),new a(30,new i(11,24),new i(16,25)),new a(30,new i(30,16),new i(2,17))),new o(25,new Array(6,32,58,84,110),new a(26,new i(8,106),new i(4,107)),new a(28,new i(8,47),new i(13,48)),new a(30,new i(7,24),new i(22,25)),new a(30,new i(22,15),new i(13,16))),new o(26,new Array(6,30,58,86,114),new a(28,new i(10,114),new i(2,115)),new a(28,new i(19,46),new i(4,47)),new a(28,new i(28,22),new i(6,23)),new a(30,new i(33,16),new i(4,17))),new o(27,new Array(6,34,62,90,118),new a(30,new i(8,122),new i(4,123)),new a(28,new i(22,45),new i(3,46)),new a(30,new i(8,23),new i(26,24)),new a(30,new i(12,15),new i(28,16))),new o(28,new Array(6,26,50,74,98,122),new a(30,new i(3,117),new i(10,118)),new a(28,new i(3,45),new i(23,46)),new a(30,new i(4,24),new i(31,25)),new a(30,new i(11,15),new i(31,16))),new o(29,new Array(6,30,54,78,102,126),new a(30,new i(7,116),new i(7,117)),new a(28,new i(21,45),new i(7,46)),new a(30,new i(1,23),new i(37,24)),new a(30,new i(19,15),new i(26,16))),new o(30,new Array(6,26,52,78,104,130),new a(30,new i(5,115),new i(10,116)),new a(28,new i(19,47),new i(10,48)),new a(30,new i(15,24),new i(25,25)),new a(30,new i(23,15),new i(25,16))),new o(31,new Array(6,30,56,82,108,134),new a(30,new i(13,115),new i(3,116)),new a(28,new i(2,46),new i(29,47)),new a(30,new i(42,24),new i(1,25)),new a(30,new i(23,15),new i(28,16))),new o(32,new Array(6,34,60,86,112,138),new a(30,new i(17,115)),new a(28,new i(10,46),new i(23,47)),new a(30,new i(10,24),new i(35,25)),new a(30,new i(19,15),new i(35,16))),new o(33,new Array(6,30,58,86,114,142),new a(30,new i(17,115),new i(1,116)),new a(28,new i(14,46),new i(21,47)),new a(30,new i(29,24),new i(19,25)),new a(30,new i(11,15),new i(46,16))),new o(34,new Array(6,34,62,90,118,146),new a(30,new i(13,115),new i(6,116)),new a(28,new i(14,46),new i(23,47)),new a(30,new i(44,24),new i(7,25)),new a(30,new i(59,16),new i(1,17))),new o(35,new Array(6,30,54,78,102,126,150),new a(30,new i(12,121),new i(7,122)),new a(28,new i(12,47),new i(26,48)),new a(30,new i(39,24),new i(14,25)),new a(30,new i(22,15),new i(41,16))),new o(36,new Array(6,24,50,76,102,128,154),new a(30,new i(6,121),new i(14,122)),new a(28,new i(6,47),new i(34,48)),new a(30,new i(46,24),new i(10,25)),new a(30,new i(2,15),new i(64,16))),new o(37,new Array(6,28,54,80,106,132,158),new a(30,new i(17,122),new i(4,123)),new a(28,new i(29,46),new i(14,47)),new a(30,new i(49,24),new i(10,25)),new a(30,new i(24,15),new i(46,16))),new o(38,new Array(6,32,58,84,110,136,162),new a(30,new i(4,122),new i(18,123)),new a(28,new i(13,46),new i(32,47)),new a(30,new i(48,24),new i(14,25)),new a(30,new i(42,15),new i(32,16))),new o(39,new Array(6,26,54,82,110,138,166),new a(30,new i(20,117),new i(4,118)),new a(28,new i(40,47),new i(7,48)),new a(30,new i(43,24),new i(22,25)),new a(30,new i(10,15),new i(67,16))),new o(40,new Array(6,30,58,86,114,142,170),new a(30,new i(19,118),new i(6,119)),new a(28,new i(18,47),new i(31,48)),new a(30,new i(34,24),new i(34,25)),new a(30,new i(20,15),new i(61,16))))}(),o.getVersionForNumber=function(e){if(e<1||e>40)throw"ArgumentException";return o.VERSIONS[e-1]},o.getProvisionalVersionForDimension=function(e){if(e%4!=1)throw"Error getProvisionalVersionForDimension";try{return o.getVersionForNumber(e-17>>2)}catch(e){throw"Error getVersionForNumber"}},o.decodeVersionInformation=function(e){for(var t=4294967295,n=0,r=0;r<o.VERSION_DECODE_INFO.length;r++){var i=o.VERSION_DECODE_INFO[r];if(i==e)return this.getVersionForNumber(r+7);var a=h.default.numBitsDiffering(e,i);a<t&&(n=r+7,t=a)}return t<=3?this.getVersionForNumber(n):null},e.exports=t.default},function(e,t,n){"use strict";function r(e){this.errorCorrectionLevel=o.default.forBits(e>>3&3),this.dataMask=7&e,this.__defineGetter__("ErrorCorrectionLevel",function(){return this.errorCorrectionLevel}),this.__defineGetter__("DataMask",function(){return this.dataMask}),this.GetHashCode=function(){return this.errorCorrectionLevel.ordinal()<<3|this.dataMask},this.Equals=function(e){var t=e;return this.errorCorrectionLevel==t.errorCorrectionLevel&&this.dataMask==t.dataMask}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(0),a=n(8),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=new Array(new Array(21522,0),new Array(20773,1),new Array(24188,2),new Array(23371,3),new Array(17913,4),new Array(16590,5),new Array(20375,6),new Array(19104,7),new Array(30660,8),new Array(29427,9),new Array(32170,10),new Array(30877,11),new Array(26159,12),new Array(25368,13),new Array(27713,14),new Array(26998,15),new Array(5769,16),new Array(5054,17),new Array(7399,18),new Array(6608,19),new Array(1890,20),new Array(597,21),new Array(3340,22),new Array(2107,23),new Array(13663,24),new Array(12392,25),new Array(16177,26),new Array(14854,27),new Array(9396,28),new Array(8579,29),new Array(11994,30),new Array(11245,31)),h=new Array(0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4);r.numBitsDiffering=function(e,t){return e^=t,h[15&e]+h[15&(0,i.URShift)(e,4)]+h[15&(0,i.URShift)(e,8)]+h[15&(0,i.URShift)(e,12)]+h[15&(0,i.URShift)(e,16)]+h[15&(0,i.URShift)(e,20)]+h[15&(0,i.URShift)(e,24)]+h[15&(0,i.URShift)(e,28)]},r.decodeFormatInformation=function(e){var t=r.doDecodeFormatInformation(e);return null!=t?t:r.doDecodeFormatInformation(21522^e)},r.doDecodeFormatInformation=function(e){for(var t=4294967295,n=0,i=0;i<s.length;i++){var a=s[i],o=a[0];if(o==e)return new r(a[1]);var h=this.numBitsDiffering(e,o);h<t&&(n=a[1],t=h)}return t<=3?new r(n):null},e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(t||(t=e),e<1||t<1)throw"Both dimensions must be greater than 0";this.width=e,this.height=t;var n=e>>5;0!=(31&e)&&n++,this.rowSize=n,this.bits=new Array(n*t);for(var r=0;r<this.bits.length;r++)this.bits[r]=0;this.__defineGetter__("Width",function(){return this.width}),this.__defineGetter__("Height",function(){return this.height}),this.__defineGetter__("Dimension",function(){if(this.width!=this.height)throw"Can't call getDimension() on a non-square matrix";return this.width}),this.get_Renamed=function(e,t){var n=t*this.rowSize+(e>>5);return 0!=(1&(0,i.URShift)(this.bits[n],31&e))},this.set_Renamed=function(e,t){var n=t*this.rowSize+(e>>5);this.bits[n]|=1<<(31&e)},this.flip=function(e,t){var n=t*this.rowSize+(e>>5);this.bits[n]^=1<<(31&e)},this.clear=function(){for(var e=this.bits.length,t=0;t<e;t++)this.bits[t]=0},this.setRegion=function(e,t,n,r){if(t<0||e<0)throw"Left and top must be nonnegative";if(r<1||n<1)throw"Height and width must be at least 1";var i=e+n,a=t+r;if(a>this.height||i>this.width)throw"The region must fit inside the matrix";for(var o=t;o<a;o++)for(var s=o*this.rowSize,h=e;h<i;h++)this.bits[s+(h>>5)]|=1<<(31&h)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(0);e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(null==t||0==t.length)throw"System.ArgumentException";this.field=e;var n=t.length;if(n>1&&0==t[0]){for(var i=1;i<n&&0==t[i];)i++;if(i==n)this.coefficients=e.Zero.coefficients;else{this.coefficients=new Array(n-i);for(var o=0;o<this.coefficients.length;o++)this.coefficients[o]=0;for(var s=0;s<this.coefficients.length;s++)this.coefficients[s]=t[i+s]}}else this.coefficients=t;this.__defineGetter__("Zero",function(){return 0==this.coefficients[0]}),this.__defineGetter__("Degree",function(){return this.coefficients.length-1}),this.__defineGetter__("Coefficients",function(){return this.coefficients}),this.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},this.evaluateAt=function(e){if(0==e)return this.getCoefficient(0);var t=this.coefficients.length;if(1==e){for(var n=0,r=0;r<t;r++)n=a.default.addOrSubtract(n,this.coefficients[r]);return n}for(var i=this.coefficients[0],r=1;r<t;r++)i=a.default.addOrSubtract(this.field.multiply(e,i),this.coefficients[r]);return i},this.addOrSubtract=function(t){if(this.field!=t.field)throw"GF256Polys do not have same GF256 field";if(this.Zero)return t;if(t.Zero)return this;var n=this.coefficients,i=t.coefficients;if(n.length>i.length){var o=n;n=i,i=o}for(var s=new Array(i.length),h=i.length-n.length,u=0;u<h;u++)s[u]=i[u];for(var f=h;f<i.length;f++)s[f]=a.default.addOrSubtract(n[f-h],i[f]);return new r(e,s)},this.multiply1=function(e){if(this.field!=e.field)throw"GF256Polys do not have same GF256 field";if(this.Zero||e.Zero)return this.field.Zero;for(var t=this.coefficients,n=t.length,i=e.coefficients,o=i.length,s=new Array(n+o-1),h=0;h<n;h++)for(var u=t[h],f=0;f<o;f++)s[h+f]=a.default.addOrSubtract(s[h+f],this.field.multiply(u,i[f]));return new r(this.field,s)},this.multiply2=function(e){if(0==e)return this.field.Zero;if(1==e)return this;for(var t=this.coefficients.length,n=new Array(t),i=0;i<t;i++)n[i]=this.field.multiply(this.coefficients[i],e);return new r(this.field,n)},this.multiplyByMonomial=function(e,t){if(e<0)throw"System.ArgumentException";if(0==t)return this.field.Zero;for(var n=this.coefficients.length,i=new Array(n+e),a=0;a<i.length;a++)i[a]=0;for(var a=0;a<n;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new r(this.field,i)},this.divide=function(e){if(this.field!=e.field)throw"GF256Polys do not have same GF256 field";if(e.Zero)throw"Divide by 0";for(var t=this.field.Zero,n=this,r=e.getCoefficient(e.Degree),i=this.field.inverse(r);n.Degree>=e.Degree&&!n.Zero;){var a=n.Degree-e.Degree,o=this.field.multiply(n.getCoefficient(n.Degree),i),s=e.multiplyByMonomial(a,o),h=this.field.buildMonomial(a,o);t=t.addOrSubtract(h),n=n.addOrSubtract(s)}return new Array(t,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(i);e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=i.default,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,r,a,o,s,h,u){this.a11=e,this.a12=r,this.a13=s,this.a21=t,this.a22=a,this.a23=h,this.a31=n,this.a32=o,this.a33=u,this.transformPoints1=function(e){for(var t=e.length,n=this.a11,r=this.a12,i=this.a13,a=this.a21,o=this.a22,s=this.a23,h=this.a31,u=this.a32,f=this.a33,l=0;l<t;l+=2){var d=e[l],w=e[l+1],c=i*d+s*w+f;e[l]=(n*d+a*w+h)/c,e[l+1]=(r*d+o*w+u)/c}},this.transformPoints2=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r],a=t[r],o=this.a13*i+this.a23*a+this.a33;e[r]=(this.a11*i+this.a21*a+this.a31)/o,t[r]=(this.a12*i+this.a22*a+this.a32)/o}},this.buildAdjoint=function(){return new i(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},this.times=function(e){return new i(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}function a(e,t){this.bits=e,this.points=t}function o(e){this.image=e,this.resultPointCallback=null,this.sizeOfBlackWhiteBlackRun=function(e,t,n,r){var i=Math.abs(r-t)>Math.abs(n-e);if(i){var a=e;e=t,t=a,a=n,n=r,r=a}for(var o=Math.abs(n-e),s=Math.abs(r-t),u=-o>>1,f=t<r?1:-1,l=e<n?1:-1,d=0,w=e,c=t;w!=n;w+=l){var v=i?c:w,g=i?w:c;if(1==d?this.image[v+g*h.default.width]&&d++:this.image[v+g*h.default.width]||d++,3==d){var m=w-e,b=c-t;return Math.sqrt(m*m+b*b)}if((u+=s)>0){if(c==r)break;c+=f,u-=o}}var _=n-e,y=r-t;return Math.sqrt(_*_+y*y)},this.sizeOfBlackWhiteBlackRunBothWays=function(e,t,n,r){var i=this.sizeOfBlackWhiteBlackRun(e,t,n,r),a=1,o=e-(n-e);o<0?(a=e/(e-o),o=0):o>=h.default.width&&(a=(h.default.width-1-e)/(o-e),o=h.default.width-1);var s=Math.floor(t-(r-t)*a);return a=1,s<0?(a=t/(t-s),s=0):s>=h.default.height&&(a=(h.default.height-1-t)/(s-t),s=h.default.height-1),o=Math.floor(e+(o-e)*a),(i+=this.sizeOfBlackWhiteBlackRun(e,t,o,s))-1},this.calculateModuleSizeOneWay=function(e,t){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.X),Math.floor(e.Y),Math.floor(t.X),Math.floor(t.Y)),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.X),Math.floor(t.Y),Math.floor(e.X),Math.floor(e.Y));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14},this.calculateModuleSize=function(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2},this.distance=function(e,t){var n=e.X-t.X,r=e.Y-t.Y;return Math.sqrt(n*n+r*r)},this.computeDimension=function(e,t,n,r){var i=Math.round(this.distance(e,t)/r),a=Math.round(this.distance(e,n)/r),o=7+(i+a>>1);switch(3&o){case 0:o++;break;case 2:o--;break;case 3:throw"Error"}return o},this.findAlignmentInRegion=function(e,t,n,r){var i=Math.floor(r*e),a=Math.max(0,t-i),o=Math.min(h.default.width-1,t+i);if(o-a<3*e)throw"Error";var s=Math.max(0,n-i),u=Math.min(h.default.height-1,n+i);return new l.AlignmentPatternFinder(this.image,a,s,o-a,u-s,e,this.resultPointCallback).find()},this.createTransform=function(e,t,n,r,a){var o,s,h,u,f=a-3.5;return null!=r?(o=r.X,s=r.Y,h=u=f-3):(o=t.X-e.X+n.X,s=t.Y-e.Y+n.Y,h=u=f),i.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,h,u,3.5,f,e.X,e.Y,t.X,t.Y,o,s,n.X,n.Y)},this.sampleGrid=function(e,t,n){return w.default.sampleGrid3(e,n,t)},this.processFinderPatternInfo=function(e){var t=e.TopLeft,n=e.TopRight,r=e.BottomLeft,i=this.calculateModuleSize(t,n,r);if(i<1)throw"Error";var o=this.computeDimension(t,n,r,i),s=f.default.getProvisionalVersionForDimension(o),h=s.DimensionForVersion-7,u=null;if(s.AlignmentPatternCenters.length>0)for(var l=n.X-t.X+r.X,d=n.Y-t.Y+r.Y,w=1-3/h,c=Math.floor(t.X+w*(l-t.X)),v=Math.floor(t.Y+w*(d-t.Y)),g=4;g<=16;g<<=1){u=this.findAlignmentInRegion(i,c,v,g);break}var m,b=this.createTransform(t,n,r,u,o),_=this.sampleGrid(this.image,b,o);return m=null==u?new Array(r,t,n):new Array(r,t,n,u),new a(_,m)},this.detect=function(){var e=(new c.FinderPatternFinder).findFinderPattern(this.image);return this.processFinderPatternInfo(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var s=n(0),h=r(s),u=n(2),f=r(u),l=n(9),d=n(10),w=r(d),c=n(11);i.quadrilateralToQuadrilateral=function(e,t,n,r,i,a,o,s,h,u,f,l,d,w,c,v){var g=this.quadrilateralToSquare(e,t,n,r,i,a,o,s);return this.squareToQuadrilateral(h,u,f,l,d,w,c,v).times(g)},i.squareToQuadrilateral=function(e,t,n,r,a,o,s,h){var u=h-o,f=t-r+o-h;if(0==u&&0==f)return new i(n-e,a-n,e,r-t,o-r,t,0,0,1);var l=n-a,d=s-a,w=e-n+a-s,c=r-o,v=l*u-d*c,g=(w*u-d*f)/v,m=(l*f-w*c)/v;return new i(n-e+g*n,s-e+m*s,e,r-t+g*r,h-t+m*h,t,g,m,1)},i.quadrilateralToSquare=function(e,t,n,r,i,a,o,s){return this.squareToQuadrilateral(e,t,n,r,i,a,o,s).buildAdjoint()},e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n){this.ordinal_Renamed_Field=e,this.bits=t,this.name=n,this.__defineGetter__("Bits",function(){return this.bits}),this.__defineGetter__("Name",function(){return this.name}),this.ordinal=function(){return this.ordinal_Renamed_Field}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,r.forBits=function(e){if(e<0||e>=h.length)throw"ArgumentException";return h[e]};var i=new r(0,1,"L"),a=new r(1,0,"M"),o=new r(2,3,"Q"),s=new r(3,2,"H"),h=new Array(a,i,s,o);e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n){this.x=e,this.y=t,this.count=1,this.estimatedModuleSize=n,this.__defineGetter__("EstimatedModuleSize",function(){return this.estimatedModuleSize}),this.__defineGetter__("Count",function(){return this.count}),this.__defineGetter__("X",function(){return Math.floor(this.x)}),this.__defineGetter__("Y",function(){return Math.floor(this.y)}),this.incrementCount=function(){this.count++},this.aboutEquals=function(e,t,n){if(Math.abs(t-this.y)<=e&&Math.abs(n-this.x)<=e){var r=Math.abs(e-this.estimatedModuleSize);return r<=1||r/this.estimatedModuleSize<=1}return!1}}function i(e,t,n,i,a,s,h){this.image=e,this.possibleCenters=new Array,this.startX=t,this.startY=n,this.width=i,this.height=a,this.moduleSize=s,this.crossCheckStateCount=new Array(0,0,0),this.resultPointCallback=h,this.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},this.foundPatternCross=function(e){for(var t=this.moduleSize,n=t/2,r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0},this.crossCheckVertical=function(e,t,n,r){var i=this.image,a=o.default.height,s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var h=e;h>=0&&i[t+h*o.default.width]&&s[1]<=n;)s[1]++,h--;if(h<0||s[1]>n)return NaN;for(;h>=0&&!i[t+h*o.default.width]&&s[0]<=n;)s[0]++,h--;if(s[0]>n)return NaN;for(h=e+1;h<a&&i[t+h*o.default.width]&&s[1]<=n;)s[1]++,h++;if(h==a||s[1]>n)return NaN;for(;h<a&&!i[t+h*o.default.width]&&s[2]<=n;)s[2]++,h++;if(s[2]>n)return NaN;var u=s[0]+s[1]+s[2];return 5*Math.abs(u-r)>=2*r?NaN:this.foundPatternCross(s)?this.centerFromEnd(s,h):NaN},this.handlePossibleCenter=function(e,t,n){var i=e[0]+e[1]+e[2],a=this.centerFromEnd(e,n),o=this.crossCheckVertical(t,Math.floor(a),2*e[1],i);if(!isNaN(o)){for(var s=(e[0]+e[1]+e[2])/3,h=this.possibleCenters.length,u=0;u<h;u++){if(this.possibleCenters[u].aboutEquals(s,o,a))return new r(a,o,s)}var f=new r(a,o,s);this.possibleCenters.push(f),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(f)}return null},this.find=function(){for(var t=this.startX,r=this.height,a=t+i,s=n+(r>>1),h=new Array(0,0,0),u=0;u<r;u++){var f=s+(0==(1&u)?u+1>>1:-(u+1>>1));h[0]=0,h[1]=0,h[2]=0;for(var l=t;l<a&&!e[l+o.default.width*f];)l++;for(var d=0;l<a;){if(e[l+f*o.default.width])if(1==d)h[d]++;else if(2==d){if(this.foundPatternCross(h)){var w=this.handlePossibleCenter(h,f,l);if(null!=w)return w}h[0]=h[2],h[1]=1,h[2]=0,d=1}else h[++d]++;else 1==d&&d++,h[d]++;l++}if(this.foundPatternCross(h)){var w=this.handlePossibleCenter(h,f,a);if(null!=w)return w}}if(0!=this.possibleCenters.length)return this.possibleCenters[0];throw"Couldn't find enough alignment patterns"}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.AlignmentPatternFinder=i;var a=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),a=r(i),o=n(0),s=r(o),h={};h.checkAndNudgePoints=function(e,t){for(var n=s.default.width,r=s.default.height,i=!0,a=0;a<t.length&&i;a+=2){var o=Math.floor(t[a]),h=Math.floor(t[a+1]);if(o<-1||o>n||h<-1||h>r)throw"Error.checkAndNudgePoints ";i=!1,-1==o?(t[a]=0,i=!0):o==n&&(t[a]=n-1,i=!0),-1==h?(t[a+1]=0,i=!0):h==r&&(t[a+1]=r-1,i=!0)}i=!0;for(var a=t.length-2;a>=0&&i;a-=2){var o=Math.floor(t[a]),h=Math.floor(t[a+1]);if(o<-1||o>n||h<-1||h>r)throw"Error.checkAndNudgePoints ";i=!1,-1==o?(t[a]=0,i=!0):o==n&&(t[a]=n-1,i=!0),-1==h?(t[a+1]=0,i=!0):h==r&&(t[a+1]=r-1,i=!0)}},h.sampleGrid3=function(e,t,n){for(var r=new a.default(t),i=new Array(t<<1),o=0;o<t;o++){for(var u=i.length,f=o+.5,l=0;l<u;l+=2)i[l]=.5+(l>>1),i[l+1]=f;n.transformPoints1(i),h.checkAndNudgePoints(e,i);try{for(var l=0;l<u;l+=2){e[Math.floor(i[l])+s.default.width*Math.floor(i[l+1])]&&r.set_Renamed(l>>1,o)}}catch(e){throw"Error.checkAndNudgePoints"}}return r},h.sampleGridx=function(e,t,n,r,i,a,o,s,u,f,l,d,w,c,v,g,m,b){var _=PerspectiveTransform.quadrilateralToQuadrilateral(n,r,i,a,o,s,u,f,l,d,w,c,v,g,m,b);return h.sampleGrid3(e,t,_)},t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){function t(e,t){var n=e.X-t.X,r=e.Y-t.Y;return Math.sqrt(n*n+r*r)}var n,r,i,a=t(e[0],e[1]),o=t(e[1],e[2]),s=t(e[0],e[2]);if(o>=a&&o>=s?(r=e[0],n=e[1],i=e[2]):s>=o&&s>=a?(r=e[1],n=e[0],i=e[2]):(r=e[2],n=e[0],i=e[1]),function(e,t,n){var r=t.x,i=t.y;return(n.x-r)*(e.y-i)-(n.y-i)*(e.x-r)}(n,r,i)<0){var h=n;n=i,i=h}e[0]=n,e[1]=r,e[2]=i}function i(e,t,n){this.x=e,this.y=t,this.count=1,this.estimatedModuleSize=n,this.__defineGetter__("EstimatedModuleSize",function(){return this.estimatedModuleSize}),this.__defineGetter__("Count",function(){return this.count}),this.__defineGetter__("X",function(){return this.x}),this.__defineGetter__("Y",function(){return this.y}),this.incrementCount=function(){this.count++},this.aboutEquals=function(e,t,n){if(Math.abs(t-this.y)<=e&&Math.abs(n-this.x)<=e){var r=Math.abs(e-this.estimatedModuleSize);return r<=1||r/this.estimatedModuleSize<=1}return!1}}function a(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2],this.__defineGetter__("BottomLeft",function(){return this.bottomLeft}),this.__defineGetter__("TopLeft",function(){return this.topLeft}),this.__defineGetter__("TopRight",function(){return this.topRight})}function o(){this.image=null,this.possibleCenters=[],this.hasSkipped=!1,this.crossCheckStateCount=new Array(0,0,0,0,0),this.resultPointCallback=null,this.__defineGetter__("CrossCheckStateCount",function(){return this.crossCheckStateCount[0]=0,this.crossCheckStateCount[1]=0,this.crossCheckStateCount[2]=0,this.crossCheckStateCount[3]=0,this.crossCheckStateCount[4]=0,this.crossCheckStateCount}),this.foundPatternCross=function(e){for(var t=0,n=0;n<5;n++){var r=e[n];if(0==r)return!1;t+=r}if(t<7)return!1;var i=Math.floor((t<<l)/7),a=Math.floor(i/2);return Math.abs(i-(e[0]<<l))<a&&Math.abs(i-(e[1]<<l))<a&&Math.abs(3*i-(e[2]<<l))<3*a&&Math.abs(i-(e[3]<<l))<a&&Math.abs(i-(e[4]<<l))<a},this.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},this.crossCheckVertical=function(e,t,n,r){for(var i=this.image,a=h.default.height,o=this.CrossCheckStateCount,s=e;s>=0&&i[t+s*h.default.width];)o[2]++,s--;if(s<0)return NaN;for(;s>=0&&!i[t+s*h.default.width]&&o[1]<=n;)o[1]++,s--;if(s<0||o[1]>n)return NaN;for(;s>=0&&i[t+s*h.default.width]&&o[0]<=n;)o[0]++,s--;if(o[0]>n)return NaN;for(s=e+1;s<a&&i[t+s*h.default.width];)o[2]++,s++;if(s==a)return NaN;for(;s<a&&!i[t+s*h.default.width]&&o[3]<n;)o[3]++,s++;if(s==a||o[3]>=n)return NaN;for(;s<a&&i[t+s*h.default.width]&&o[4]<n;)o[4]++,s++;if(o[4]>=n)return NaN;var u=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(u-r)>=2*r?NaN:this.foundPatternCross(o)?this.centerFromEnd(o,s):NaN},this.crossCheckHorizontal=function(e,t,n,r){for(var i=this.image,a=h.default.width,o=this.CrossCheckStateCount,s=e;s>=0&&i[s+t*h.default.width];)o[2]++,s--;if(s<0)return NaN;for(;s>=0&&!i[s+t*h.default.width]&&o[1]<=n;)o[1]++,s--;if(s<0||o[1]>n)return NaN;for(;s>=0&&i[s+t*h.default.width]&&o[0]<=n;)o[0]++,s--;if(o[0]>n)return NaN;for(s=e+1;s<a&&i[s+t*h.default.width];)o[2]++,s++;if(s==a)return NaN;for(;s<a&&!i[s+t*h.default.width]&&o[3]<n;)o[3]++,s++;if(s==a||o[3]>=n)return NaN;for(;s<a&&i[s+t*h.default.width]&&o[4]<n;)o[4]++,s++;if(o[4]>=n)return NaN;var u=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(u-r)>=r?NaN:this.foundPatternCross(o)?this.centerFromEnd(o,s):NaN},this.handlePossibleCenter=function(e,t,n){var r=e[0]+e[1]+e[2]+e[3]+e[4],a=this.centerFromEnd(e,n),o=this.crossCheckVertical(t,Math.floor(a),e[2],r);if(!isNaN(o)&&(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(o),e[2],r),!isNaN(a))){for(var s=r/7,h=!1,u=this.possibleCenters.length,f=0;f<u;f++){var l=this.possibleCenters[f];if(l.aboutEquals(s,o,a)){l.incrementCount(),h=!0;break}}if(!h){var d=new i(a,o,s);this.possibleCenters.push(d),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(d)}return!0}return!1},this.selectBestPatterns=function(){var e=this.possibleCenters.length;if(e<3)throw"Couldn't find enough finder patterns (found "+e+")";if(e>3){for(var t=0,n=0,r=0;r<e;r++){var i=this.possibleCenters[r].EstimatedModuleSize;t+=i,n+=i*i}var a=t/e;this.possibleCenters.sort(function(e,t){var n=Math.abs(t.EstimatedModuleSize-a),r=Math.abs(e.EstimatedModuleSize-a);return n<r?-1:n==r?0:1});for(var o=Math.sqrt(n/e-a*a),s=Math.max(.2*a,o),r=this.possibleCenters.length-1;r>=0;r--){var h=this.possibleCenters[r];Math.abs(h.EstimatedModuleSize-a)>s&&this.possibleCenters.splice(r,1)}}return this.possibleCenters.length>3&&this.possibleCenters.sort(function(e,t){return e.count>t.count?-1:e.count<t.count?1:0}),new Array(this.possibleCenters[0],this.possibleCenters[1],this.possibleCenters[2])},this.findRowSkip=function(){var e=this.possibleCenters.length;if(e<=1)return 0;for(var t=null,n=0;n<e;n++){var r=this.possibleCenters[n];if(r.Count>=d){if(null!=t)return this.hasSkipped=!0,Math.floor((Math.abs(t.X-r.X)-Math.abs(t.Y-r.Y))/2);t=r}}return 0},this.haveMultiplyConfirmedCenters=function(){for(var e=0,t=0,n=this.possibleCenters.length,r=0;r<n;r++){var i=this.possibleCenters[r];i.Count>=d&&(e++,t+=i.EstimatedModuleSize)}if(e<3)return!1;for(var a=t/n,o=0,r=0;r<n;r++)i=this.possibleCenters[r],o+=Math.abs(i.EstimatedModuleSize-a);return o<=.05*t},this.findFinderPattern=function(e){this.image=e;var t=h.default.height,n=h.default.width,i=Math.floor(3*t/(4*f));i<u&&(i=u);for(var o=!1,s=new Array(5),l=i-1;l<t&&!o;l+=i){s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0;for(var d=0,w=0;w<n;w++)if(e[w+l*h.default.width])1==(1&d)&&d++,s[d]++;else if(0==(1&d))if(4==d)if(this.foundPatternCross(s)){var c=this.handlePossibleCenter(s,l,w);if(c)if(i=2,this.hasSkipped)o=this.haveMultiplyConfirmedCenters();else{var v=this.findRowSkip();v>s[2]&&(l+=v-s[2]-i,w=n-1)}else{do{w++}while(w<n&&!e[w+l*h.default.width]);w--}d=0,s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0}else s[0]=s[2],s[1]=s[3],s[2]=s[4],s[3]=1,s[4]=0,d=3;else s[++d]++;else s[d]++;if(this.foundPatternCross(s)){var c=this.handlePossibleCenter(s,l,n);c&&(i=s[0],this.hasSkipped&&(o=this.haveMultiplyConfirmedCenters()))}}var g=this.selectBestPatterns();return r(g),new a(g)}}Object.defineProperty(t,"__esModule",{value:!0}),t.FinderPatternFinder=o;var s=n(0),h=function(e){return e&&e.__esModule?e:{default:e}}(s),u=3,f=57,l=8,d=2},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(13),a=r(i),o=n(1),s=r(o),h=n(14),u=r(h),f=n(16),l=r(f),d=n(17),w=r(d),c={};c.rsDecoder=new a.default(s.default.QR_CODE_FIELD),c.correctErrors=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++)r[i]=255&e[i];var a=e.length-t;try{c.rsDecoder.decode(r,a)}catch(e){throw e}for(var i=0;i<t;i++)e[i]=r[i]},c.decode=function(e){for(var t=new u.default(e),n=t.readVersion(),r=t.readFormatInformation().ErrorCorrectionLevel,i=t.readCodewords(),a=l.default.getDataBlocks(i,n,r),o=0,s=0;s<a.length;s++)o+=a[s].NumDataCodewords;for(var h=new Array(o),f=0,d=0;d<a.length;d++){var v=a[d],g=v.Codewords,m=v.NumDataCodewords;c.correctErrors(g,m);for(var s=0;s<m;s++)h[f++]=g[s]}return new w.default(h,n.VersionNumber,r.Bits)},t.default=c,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){this.field=e,this.decode=function(e,t){for(var n=new h.default(this.field,e),r=new Array(t),i=0;i<r.length;i++)r[i]=0;for(var a=!0,i=0;i<t;i++){var s=n.evaluateAt(this.field.exp(i));r[r.length-1-i]=s,0!=s&&(a=!1)}if(!a)for(var u=new h.default(this.field,r),f=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),u,t),l=f[0],d=f[1],w=this.findErrorLocations(l),c=this.findErrorMagnitudes(d,w,!1),i=0;i<w.length;i++){var v=e.length-1-this.field.log(w[i]);if(v<0)throw"ReedSolomonException Bad error location";e[v]=o.default.addOrSubtract(e[v],c[i])}},this.runEuclideanAlgorithm=function(e,t,n){if(e.Degree<t.Degree){var r=e;e=t,t=r}for(var i=e,a=t,o=this.field.One,s=this.field.Zero,h=this.field.Zero,u=this.field.One;a.Degree>=Math.floor(n/2);){var f=i,l=o,d=h;if(i=a,o=s,h=u,i.Zero)throw"r_{i-1} was zero";a=f;for(var w=this.field.Zero,c=i.getCoefficient(i.Degree),v=this.field.inverse(c);a.Degree>=i.Degree&&!a.Zero;){var g=a.Degree-i.Degree,m=this.field.multiply(a.getCoefficient(a.Degree),v);w=w.addOrSubtract(this.field.buildMonomial(g,m)),a=a.addOrSubtract(i.multiplyByMonomial(g,m))}s=w.multiply1(o).addOrSubtract(l),u=w.multiply1(h).addOrSubtract(d)}var b=u.getCoefficient(0);if(0==b)throw"ReedSolomonException sigmaTilde(0) was zero";var _=this.field.inverse(b),y=u.multiply2(_),p=a.multiply2(_);return new Array(y,p)},this.findErrorLocations=function(e){var t=e.Degree;if(1==t)return new Array(e.getCoefficient(1));for(var n=new Array(t),r=0,i=1;i<256&&r<t;i++)0==e.evaluateAt(i)&&(n[r]=this.field.inverse(i),r++);if(r!=t)throw"Error locator degree does not match number of roots";return n},this.findErrorMagnitudes=function(e,t,n){for(var r=t.length,i=new Array(r),a=0;a<r;a++){for(var s=this.field.inverse(t[a]),h=1,u=0;u<r;u++)a!=u&&(h=this.field.multiply(h,o.default.addOrSubtract(1,this.field.multiply(t[u],s))));i[a]=this.field.multiply(e.evaluateAt(s),this.field.inverse(h)),n&&(i[a]=this.field.multiply(i[a],s))}return i}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(1),o=r(a),s=n(5),h=r(s);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.Dimension;if(t<21||1!=(3&t))throw"Error BitMatrixParser";this.bitMatrix=e,this.parsedVersion=null,this.parsedFormatInfo=null,this.copyBit=function(e,t,n){return this.bitMatrix.get_Renamed(e,t)?n<<1|1:n<<1},this.readFormatInformation=function(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);if(this.parsedFormatInfo=o.default.decodeFormatInformation(e),null!=this.parsedFormatInfo)return this.parsedFormatInfo;var r=this.bitMatrix.Dimension;e=0;for(var i=r-8,t=r-1;t>=i;t--)e=this.copyBit(t,8,e);for(var n=r-7;n<r;n++)e=this.copyBit(8,n,e);if(this.parsedFormatInfo=o.default.decodeFormatInformation(e),null!=this.parsedFormatInfo)return this.parsedFormatInfo;throw"Error readFormatInformation"},this.readVersion=function(){if(null!=this.parsedVersion)return this.parsedVersion;var e=this.bitMatrix.Dimension,t=e-17>>2;if(t<=6)return h.default.getVersionForNumber(t);for(var n=0,r=e-11,i=5;i>=0;i--)for(var a=e-9;a>=r;a--)n=this.copyBit(a,i,n);if(this.parsedVersion=h.default.decodeVersionInformation(n),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==e)return this.parsedVersion;n=0;for(var a=5;a>=0;a--)for(var i=e-9;i>=r;i--)n=this.copyBit(a,i,n);if(this.parsedVersion=h.default.decodeVersionInformation(n),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==e)return this.parsedVersion;throw"Error readVersion"},this.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),n=f.default.forReference(e.DataMask),r=this.bitMatrix.Dimension;n.unmaskBitMatrix(this.bitMatrix,r);for(var i=t.buildFunctionPattern(),a=!0,o=new Array(t.TotalCodewords),s=0,h=0,u=0,l=r-1;l>0;l-=2){6==l&&l--;for(var d=0;d<r;d++)for(var w=a?r-1-d:d,c=0;c<2;c++)i.get_Renamed(l-c,w)||(u++,h<<=1,this.bitMatrix.get_Renamed(l-c,w)&&(h|=1),8==u&&(o[s++]=h,u=0,h=0));a^=!0}if(s!=t.TotalCodewords)throw"Error readCodewords";return o}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(3),o=r(a),s=n(2),h=r(s),u=n(15),f=r(u);e.exports=t.default},function(e,t,n){"use strict";function r(){this.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)},this.isMasked=function(e,t){return 0==(e+t&1)}}function i(){this.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)},this.isMasked=function(e,t){return 0==(1&e)}}function a(){this.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)},this.isMasked=function(e,t){return t%3==0}}function o(){this.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)},this.isMasked=function(e,t){return(e+t)%3==0}}function s(){this.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)},this.isMasked=function(e,t){return 0==((0,l.URShift)(e,1)+t/3&1)}}function h(){this.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)},this.isMasked=function(e,t){var n=e*t;return(1&n)+n%3==0}}function u(){this.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)},this.isMasked=function(e,t){var n=e*t;return 0==((1&n)+n%3&1)}}function f(){this.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)},this.isMasked=function(e,t){return 0==((e+t&1)+e*t%3&1)}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),d={};d.forReference=function(e){if(e<0||e>7)throw"System.ArgumentException";return d.DATA_MASKS[e]},d.DATA_MASKS=new Array(new r,new i,new a,new o,new s,new h,new u,new f),t.default=d,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){this.numDataCodewords=e,this.codewords=t,this.__defineGetter__("NumDataCodewords",function(){return this.numDataCodewords}),this.__defineGetter__("Codewords",function(){return this.codewords})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,r.getDataBlocks=function(e,t,n){if(e.length!=t.TotalCodewords)throw"ArgumentException";for(var i=t.getECBlocksForLevel(n),a=0,o=i.getECBlocks(),s=0;s<o.length;s++)a+=o[s].Count;for(var h=new Array(a),u=0,f=0;f<o.length;f++)for(var l=o[f],s=0;s<l.Count;s++){var d=l.DataCodewords,w=i.ECCodewordsPerBlock+d;h[u++]=new r(d,new Array(w))}for(var c=h[0].codewords.length,v=h.length-1;v>=0;){if(h[v].codewords.length==c)break;v--}v++;for(var g=c-i.ECCodewordsPerBlock,m=0,s=0;s<g;s++)for(var f=0;f<u;f++)h[f].codewords[s]=e[m++];for(var f=v;f<u;f++)h[f].codewords[g]=e[m++];for(var b=h[0].codewords.length,s=g;s<b;s++)for(var f=0;f<u;f++){var _=f<v?s:s+1;h[f].codewords[_]=e[m++]}return h},e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n){this.blockPointer=0,this.bitPointer=7,this.dataLength=0,this.blocks=e,this.numErrorCorrectionCode=n,t<=9?this.dataLengthMode=0:t>=10&&t<=26?this.dataLengthMode=1:t>=27&&t<=40&&(this.dataLengthMode=2),this.getNextBits=function(e){var t=0;if(e<this.bitPointer+1){for(var n=0,r=0;r<e;r++)n+=1<<r;return n<<=this.bitPointer-e+1,t=(this.blocks[this.blockPointer]&n)>>this.bitPointer-e+1,this.bitPointer-=e,t}if(e<this.bitPointer+1+8){for(var i=0,r=0;r<this.bitPointer+1;r++)i+=1<<r;return t=(this.blocks[this.blockPointer]&i)<<e-(this.bitPointer+1),this.blockPointer++,t+=this.blocks[this.blockPointer]>>8-(e-(this.bitPointer+1)),this.bitPointer=this.bitPointer-e%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),t}if(e<this.bitPointer+1+16){for(var i=0,a=0,r=0;r<this.bitPointer+1;r++)i+=1<<r;var o=(this.blocks[this.blockPointer]&i)<<e-(this.bitPointer+1);this.blockPointer++;var s=this.blocks[this.blockPointer]<<e-(this.bitPointer+1+8);this.blockPointer++;for(var r=0;r<e-(this.bitPointer+1+8);r++)a+=1<<r;a<<=8-(e-(this.bitPointer+1+8));return t=o+s+((this.blocks[this.blockPointer]&a)>>8-(e-(this.bitPointer+1+8))),this.bitPointer=this.bitPointer-(e-8)%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),t}return 0},this.NextMode=function(){return this.blockPointer>this.blocks.length-this.numErrorCorrectionCode-2?0:this.getNextBits(4)},this.getDataLength=function(e){for(var t=0;;){if(e>>t==1)break;t++}return this.getNextBits(a.default.sizeOfDataLengthInfo[this.dataLengthMode][t])},this.getRomanAndFigureString=function(e){var t=e,n=0,r="",i=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":");do{if(t>1){n=this.getNextBits(11);var a=Math.floor(n/45),o=n%45;r+=i[a],r+=i[o],t-=2}else 1==t&&(n=this.getNextBits(6),r+=i[n],t-=1)}while(t>0);return r},this.getFigureString=function(e){var t=e,n=0,r="";do{t>=3?(n=this.getNextBits(10),n<100&&(r+="0"),n<10&&(r+="0"),t-=3):2==t?(n=this.getNextBits(7),n<10&&(r+="0"),t-=2):1==t&&(n=this.getNextBits(4),t-=1),r+=n}while(t>0);return r},this.get8bitByteArray=function(e){var t=e,n=0,r=new Array;do{n=this.getNextBits(8),r.push(n),t--}while(t>0);return r},this.getKanjiString=function(e){var t=e,n=0,r="";do{n=this.getNextBits(13);var i=n%192,a=n/192,o=(a<<8)+i,s=0;s=o+33088<=40956?o+33088:o+49472,r+=String.fromCharCode(s),t--}while(t>0);return r},this.parseECIValue=function(){var e=0,t=this.getNextBits(8);if(0==(128&t)&&(e=127&t),128==(192&t)){e=(63&t)<<8|this.getNextBits(8)}if(192==(224&t)){e=(31&t)<<16|this.getNextBits(8)}return e},this.__defineGetter__("DataByte",function(){for(var e=new Array;;){var t=this.NextMode();if(0==t){if(e.length>0)break;throw"Empty data block"}if(1!=t&&2!=t&&4!=t&&8!=t&&7!=t)throw"Invalid mode: "+t+" in (block:"+this.blockPointer+" bit:"+this.bitPointer+")";if(7==t)var n=this.parseECIValue();else{var r=this.getDataLength(t);if(r<1)throw"Invalid data length: "+r;switch(t){case 1:for(var i=this.getFigureString(r),a=new Array(i.length),o=0;o<i.length;o++)a[o]=i.charCodeAt(o);e.push(a);break;case 2:for(var i=this.getRomanAndFigureString(r),a=new Array(i.length),o=0;o<i.length;o++)a[o]=i.charCodeAt(o);e.push(a);break;case 4:var n=this.get8bitByteArray(r);e.push(n);break;case 8:var i=this.getKanjiString(r);e.push(i)}}}return e})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);e.exports=t.default}])});